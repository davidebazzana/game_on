%h2
  = @user.username
  \-
  = @user.role

%p
  %h3 Username
  %div= @user.username

%p
  %h3 Email
  %div= @user.email

- if can? :follow, @user

  %ul
    - if current_user.follows? @user
      %p you already follow #{@user.username}
    - else
      = link_to "Follow", relationships_path(:followed_id => @user), :method => :post, class: "btn"

- else

  %table
    %thead
      %tr
        %th Following
        %th Status
    %tbody
      - for followed in @user.following
        %tr
          %td
            = h followed.username
            - if can? :unfollow, followed
              = link_to "remove", relationship_path(followed), :method => :delete, class: "btn"
          %td
            - if @online_users.include?(followed)
              .onlinestatus Online
            - else
              .offlinestatus Offline
             
  %table
    %thead
      %tr
        %th Followers

    %tbody
      - for follower in @user.followers
        %tr
          %td= h follower.username

%br

%p= link_to "Find people", users_path, class: "link"
- if (can? :update, @user) || (can? :assign_role, @user)
  = link_to 'Edit', edit_user_path, class: "btn"
- if can? :read_favorites_list, @user
  %p= link_to 'Favorite games', favorite_games_path, class: "link"
= link_to 'HomePage', games_path, class: "link"
