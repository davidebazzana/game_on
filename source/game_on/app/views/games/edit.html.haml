= link_to 'Back to main menu', games_path, class: "link"
= link_to "Back to #{@game.title}", game_path(@game), class: "link"
%h2 Edit #{@game.title}

= form_tag game_path(@game), :method => :put, :multipart=>true, :onSubmit => "return setPattern()" do

  = label :game, :title, 'Title'
  = text_field :game, :title

  = label :game, :info, 'Info'
  = hidden_field_tag :tp
  = text_area :game, :info

  = label :game, :category, 'Category'
  = select(:game, :category, options_for_select(Game::CATEGORIES, @game.category))

  = label :game, :version, 'Version (For reference and examples on semantic versioning, visit semver.org)'
  = text_field :game, :version, value: @game.version

  = label :game, :files, 'Ready to release a new patch? Upload the files here (Not every file of the build is needed, select just the files in foo/Build/*)'
  = file_field :game, :files, multiple: true

  = submit_tag 'Commit updates'
%br
= link_to 'Delete game', game_path(@game), :method => :delete, class: "btn"

:javascript
    var tdna = new TypingDNA();
    tdna.start();
    function setPattern() {
        var typedText = document.getElementById('game_info').value;
        var tp = tdna.getTypingPattern({type: 0, length: typedText.length});
        var isValid = true;
        
        if (!tp) {
        isvalid = false;
        } 
        if (typedText.length < 100) {
        isValid = false;
        }
        
        if (isValid) {
        document.getElementById('tp').value = tp;
        }
    }
